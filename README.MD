## Distinctiveness and Complexity
### What ?
The current app named *Flowerz* is an AI-Powered flower identification and information app.
### Why ?
I built it because i love flowers but sadly i don't know so much about them , It is also a reference to the first line of my favorite song, [Skyclub](https://open.spotify.com/track/3ydEwex0A7Lno5LgimRMua?si=a410389a8e8a4b86) by Népal.
### How ?
The app uses a Tensorflow Model, a wrapper for the Trefle Botanical Data API, and Wikipedia in the backend, and [React](https://react.dev/), [Pico.css](https://picocss.com/), [Webpack](https://webpack.js.org/) and the [Swiper](https://swiperjs.com/) packages in the front end.

#### The Model
The app uses a Tensorflow Computer Vision model that I built by extracting feature vectors from the [MobileNet V2](https://tfhub.dev/google/tf2-preview/mobilenet_v2/feature_vector/4) model, which was pre-trained on the ImageNet (ILSVRC-2012-CLS) dataset. I then fine-tuned the resulting model on the [Oxford Flowers 102](https://www.tensorflow.org/datasets/catalog/oxford_flowers102) dataset.

The model includes the following components:
 - Data Augmentation: Implemented to reduce overfitting and enhance generalization capabilities.
 - A Classification Head : Designed to generate predictions for flower categories.

The training data comes from the [Oxford Flowers 102 dataset](https://www.tensorflow.org/datasets/catalog/oxford_flowers102), which consists of 102 flower categories. Each class comprises between 40 and 258 images, and there are categories that exhibit significant variations within the category, as well as several very similar categories.

The notebook used for training and exporting the model can be accessed [here](https://github.com/Overlrd/Flowerz-Notebooks/blob/main/flowerz.ipynb).

Note: Within the app, the label_names.json file contains the label names and includes two values for most of the classes: a *default_name*, which represents the label name provided by the dataset, and a *better_name*, which corresponds to the title of the Wikipedia page for the flower (often the scientific or common name of the flower).

#### trefle-api
The app utilizes a Python package called trefle-api to provide a search feature. This package serves as a wrapper for the [Trefle Global Plants API](https://trefle.io/), which I specifically created for the app. . Please check the documentation of the package [here](https://github.com/Overlrd/trefle#trefle-api).

#### Wikipedia
The descriptions, scientific classifications, and some images provided in the app about flowers are extracted from Wikipedia. The code for the extractor can be found in ```Flowerz/utils/wikipedia_utils.py```

## The content of the project
```
├── Flowerz
├── LICENSE
├── manage.py
├── media
├── package.json
├── package-lock.json
├── predict
├── README.MD
├── requirements.txt
├── search
├── src
├── static
├── templates
└── webpack.config.js
```

The *Flowerz* Django project consists of three apps :
 - ```Flowerz```
 - ```predict```
 - ```search```

Directories :
 - ```media``` : The media root of the app, which includes two subdirectories:
    - ```images``` : Contains the images uploaded and submitted to the model for prediction.
    - ```test_images``` :Contains 5 flower images for testing purposes.
 - ```src``` :  The *src* directory contains the front-end React app with the following subdirectories:
    - ```components``` : Holds the components of the app.
    - ```static``` : Contains the static files (CSS and images).
    - ```utils``` :  Includes JavaScript utilities used to request and process data from the backend.
- ```templates``` : Contains the project's templates rendered by webpack.
- ```static``` : Holds the project's static files and bundles generated by webpack.

Files :
 - ```webpack.config.js``` : contains webpack's configuration 
 - ```package.json & package-lock.json``` :These files contain the configuration for [Node.js](https://nodejs.org/en), listing project dependencies and metadata. 
 - ```requirements.txt``` : Contains the required Python packages to run the app.

### Flowerz
Flowerz: The default app of the project.
```
├── asgi.py
├── __init__.py
├── settings.py
├── tests.py
├── urls.py
├── utils
│   ├── __init__.py
│   └── wikipedia_utils.py
├── views.py
└── wsgi.py
```
In addition to the app's default files, I have added:
- ```utils(directory)``` : The utils package contains the wikipedia_utils module, which is used in both the *predict* and *search* apps to extract data from Wikipedia.

### Predict
The predict package contains the code for using the model to make predictions.
```
├── admin.py
├── apps.py
├── forms.py
├── __init__.py
├── magi
│   ├── assets
│   │   ├── label_names.json
│   │   ├── model_config.json
│   │   └── model_weights.h5
│   └── __init__.py
├── models.py
├── tests.py
├── urls.py
├── utils
│   ├── model_utils.py
│   └── util.py
└── views.py
```

In addition to the default django app files , the predict package contains:

- ```magi(directory)``` :  The *magi* directoryholds the assets for the model.
    - ```label_names.json``` : Contains the labels (*default_name* and *better_name*) of the *Oxford102_Flowers* Dataset.
    - ```model_config.json``` :  Contains the architecture of the model used for rebuilding it.
    - ```model_weights.h5``` : contains the saved weights of the model.
- ```utils(directory)``` : contains some utility modules for the app.
    - ```model_utils.py``` : contains the functions to build and use the model for inference.
    - ```util.py``` : This file contains utility functions that are independent of the model. These utilities are designed to manage package response generation

### Search
```
├── admin.py
├── apps.py
├── __init__.py
├── models.py
├── tests.py
├── urls.py
└── views.py
```
The search package contains the default Django app files, and no new files were created.
## How to Run ?

Requirements :
 - Python version ```3.10.6```
 - An API KEY from the [trefle api](https://trefle.io/)

To run the app :
 - Create and activate a Python virtual environement in the root folder of the project.
    ```shell
    python3 -m venv my_env
    source ./my_env/bin/activate
    ```
 - Install the required python packages listed inside the ```resuirements.txt``` file. 
    ```bash
    pip install -r requirements.txt
    ```
 - Create a ```.env``` file in the Flowerz __app__
    ```shell
    cd Flowerz
    touch .env
    ```
 - Save your api key in the ```.env```  file as follows :
    ```python
    TREFLE_API_KEY = "your api key"
    ```
 - Make migrations and Start the django server 
    ```shell
    python3 manage.py makemigrations
    python3 manage.py migrate
    python3 manage.py runserver
    ```

## Additional information
As I used Node.js packages for the front end of the app, if you need to run the project in development mode, make sure to fulfill the following requirements:
- Node.js version ```20.5.0```
- npm version ```9.8.1```
- install the required packages in the package.json file in the root of the project.

To start the webpack bundler in watch mode, updating changes in real-time in the src directory of the project, run:
```shell
npm run dev 
```
To run webpack in production mode, generating production-ready bundles for the project, use:
```shell
npm run build
```

Note : there is no need to build the bundles again. The project's bundles have already been generated and are ready for use in both development and production environments.


